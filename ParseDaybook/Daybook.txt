2021-01-01 Fri 17:05-18:55 breaks: =1:50
[] Six hours to make up before monday.
Updated howto doc with branching tips. Added script to automatically update TOC in the doc.
2021-01-03 Sun 12:19-19:00   breaks: 12:35-12:46 &15m & 14:35-14:49 &2:10

Reviewed my changes (unit testing module static funcs) and created a feature branch for it.
Pushed the branch and created a pull request, sent to Olaf and the Purples.

Week 01 (2021)
2021-01-04 Mon 07:40-19:10 breaks: 12:25-13:23 & 10m & 20m =12:30-1:30 = 11:00
Christoph: “In Switzerland there's a saying -> 2 Doofe, 1 Gedanke”

What a whirlwind tour today!!!

[x] 9am to 12pm Big retro with Olaf – positives, negatives.
[x] 13.30-14:00 Bila with Marc Zahno about his negative feedback (‘worse performance in late dec’—though Thiago and Jonas seemed to have opposite view, like me); tried to encourage him to give earlier feedback rather than wait so late..
[x] 14:00 quick meeting about c++ mock support for Poor Mans CppUTest – need to sync with Alex –WHEN?!!
[x] 14:30 short wrapup purple 
[] 15:15-16:15 therapy review with Olaf, continued as workshop:
•   Reviewed my static functions unit test pull request and needed Stefan Eicher’s help to remove my changes to the conanfile.py (Ypsomed-doxygen problem fixed by running python build.py in top folder, I guess)..
•   Reviewed the IT2521_RefactoringAccu branch and merged into work/IT1928_TherapyMinimalViableProduct so we can start a new work packet tomorrow..
•   
2021-01-05 Tue 08:40-19:00 breaks: 12:10-13:00 & 10 & 20=10:20-1:20 = 9:00
[] orange daily
[] green daily
[] purple daily
[] groups daily
[] ask devops to Delete the feature branches feature/TherapyTestStatics and feature/TherapyTestStatics2 after verifying they are no longer needed
git remote show origin
git push --delete origin <branchname>

Morning session and afternoon sessions with Purple team.
Added sunny day tests for Slicer and Doser!
And outlined remaining tests needed.
Good: Discovered 3 errors in code:
-   Division by zero; fixed with assert arg not zero
-   Truncation of division to zero in slicer; nasty bug, should be easy to fix
-   A > that should have been a <= in the Doser
Also an effectiveness team meeting from Olaf after lunch.

2021-01-06 Wed 08:20-19:00 breaks: 12:20-13:20 & 10min &10min = 9:40 – 1:20 = 8:20
[] - 8.30-9 Morning meeting Olaf: Scrum master role for me? 
  - Planning meeting today too! (biweekly)
[] 15min with Alex abt Logger instead of Green .. seemed useful
[] Review outstanding todos from mon/tue dailys?
[] ACCU sunny day tests.
[] Would be nice to review cpp mock stuff in the morning first??

Good morning session with Marc coding !
And he showed some wizardly Git branch acrobatics using some tool called “Fork” ($50 lifetime license!)

Had some problems today though – Marc had a merge conflict and Thiago too…
We also discovered an error with truncation of a division result, resulting in not all of a therapy dose being delivered (EB) by the end of the required duration – and being lost if no other therapy is continuing, as no more chunks would be generated.  Also, there was an underflow error in calculating the remaining time for the shortest therapy.

Jonas made progress to adapt scenario test to new accu tests…


2021-01-07 Thu 09:25-18:58 breaks: 12:20-13:25 & 10m & 15m = 9:35 – 1:30 = 8:05
Rough night, harder to crawl out of bed today.. managed to join purple daily, almost forgot about group daily..
[] Review the cpp mock??
[] Review yday’s ACCU tests

Thiago completed 3rd Accu test (cloudy – two therapies ending at same time, only one having truncation issue with rate calculations, verifying that no dosing error occurs).

Started looking at Jonas’ TherapyScenario test adaptation to new accu api. On his branch.

By eod managed to have a BR (just one 30min period) test in addition to SB and EB (and the cloudy day test with EB and SB ending at same time, to verify fix for division truncation in contribution to aggregate rate for chunk calculation).
This also included various other fixes and a sanity check for premature timer expiration that causes an apparent (not real) ‘overshoot’ of dosing (in the EB test?)…

2021-01-08 Fri 08:55-18:59 breaks: 12:10-13:15 &15m &10m = 10:05 – 1:30 = 8:35
[] time to review mark z’s slicer tests??
[x]Jonas already added a ‘backlog counter’ (aka buffer) to Motor module to retire the ‘busy’ state and we reviewed it
[x] Then run simple therapy scenario all the way through to stairstep curve of real pump vs ideal.
[x] Took 30min with Marc Z. to setup my laptop so in principle it can convert test output (no logging) into a csv file that can be plotted in Excel

[] Retest the timers using latest code.


2021-01-09 Sat 23:00-23:45 breaks: = 0:45
Got a bee in my bonnet about the 486days capacity of a uint32 holding seconds...  Turns out I got confused about the ACCEL_FACTOR of 100: the acceleration simply speeds up how fast the uint32 reaches its max capacity. It does not change the value.  So uint32 seconds fields can hold 49710days.
// uptime (since init called); can hold 0xFFFFFFFF == 4,294,967,295 ~ 4.3e9 seconds
// (4.3e9 s / 24x3600 s per day) = 49710 days = 136 years 
So we can use e.g. a round 49000 days as a safe upper limit with safety margin of ca 2 years!



Week 02 (2021)
2021-01-11 Mon 07:20-17:50 breaks: 12:00-12:55 & 10m & 10m = 11:10 – 1:15 = 9:55
Got some meetings sent to me today:
Olaf: Purple team estimations most of day tomorrow 10-12 & 1-3
Olaf: Abgleich meeting next week Tue 19/1, 1pm-2pm
Stefan Lindegger: Abgleich Control App, Thur 14/1/21 1pm-2pm
[x] Slightly amusing 5min from Kevlin Henney on indenting code https://youtu.be/ZsHMHukIlJY?t=10m43s 
[x] Review the CppUTest mock replacement idea
[] Review the Accu/Doser/Slicer/Driver/Motor pipeline
[] Try out latest SwTimer code
This became a bit of a saga.. a quite invasive change that required updating to:
-   Event scheduler
-   Logger
-   ErrorHandler
-   …

Hardware list on wiki (Jonas): http://bit.ly/ypso-wiki-hw-list

Got access to the risks and hazards document, via the citrix sap logon pad application. Navigation was a bit convoluted and I forgot the full path.. You need to use some advanced advanced search tab and enter the document number that Jonas added to a wiki page for Therapy…
[] Review Risks/Hazards doc
[] Review Therapy wiki

2021-01-12 Tue 07:35-21:41  breaks: 12:20-13:05 & 15m & 10m & 20m & 15m = 10:00
[] Review pull requests outstanding
[] 8am Purpole meet OBR re BR/TBF (and BR/SB) misallocation of ahead amount/compensation
[] Broach python charting idea with Marc – Olaf already did it in the past, can guide
[x] Some progress on Olafs PMCUTMock lib – see github.com/fazl/olaf-pmcut-mock


2021-01-13 Wed 08:15-23:58 breaks: 12:05-12:50 &15m+15m+1:25 = 15:45 – 2:40 = 13:05
[x] some progress on cpp mock
[x] 10am Team Chat.. Bring up inter-team code sync issues and lack of accelfactor  and get nice walkthrough about DSM from Olaf&Marius

Tool training with Stefan and Michel Meyer:
Some good background on packaging, a fast whirlwind tour of VSCode/Conan/Cmake.
I tried to steer it back to practical for David and Marc.

2021-01-14 Thu 07:45-19:05 breaks: 50m & 15m & 10m = 11:20 – 1:15 = 10:05
Night: 21:05-23:30 (wanted to try out https://github.com/jgonzalezdr/CppUMockGen, but looks like Therapy tests already use it at least in places. Discovered, function template instantiation allows overloading on return type, I guess because it’s explicitly instantiating the overload requested..)

Should copy meeting links to daybook in case citrix down and later 
[x] Morning session on time accel factor
    - Olaf: also good as smoke test to simulate CPU under 100+% load
    - Marc S has a YPS_TEST macro that, on posix he could add some module API to set the accel factor on a per test basis
[x]9am time estimation exercise with purple
[x]11.30a Review cpp mock with Olaf/Alex. 
-   Seems I forgot about the varargs idea!!
-   Also, realised cannot overload on return type!! So need some wrapper..
-   Need to avoid heap fragmentation after initial startup
-   
[x]1pm Control App abgleichsmeeting YPU2.0 – Stefan Lindegger
Lots of parrying back and forth but Olaf seems to have pushed into a good direction.
Some discussion about java vs C for simulator

[x]2pm quick review of CppUMockGen, nice of Alex to show me what it does. Need to try it out..
[] TODO try out https://github.com/jgonzalezdr/CppUMockGen to simplify the Therapy module unit tests, and show the guys too..

[x]3pm purple estimation contd (link)
    - Olaf agreed the 

[x] (David did) todo setup a training experience summary page

2021-01-15 Fri 08:00-17:05 breaks: 15m+1:05 & 15min = 9:05 – 1:35 = 7:30
[x] Jumma on time, as 1pm meeting
[x] 1p Purple challenge round
Went into detail on topics, 4, 6, 12, 13, 15
[x] 15:30 Purple meeting re-visit estimates w/o Olaf 
    - Thiago reminds me of Jorge Ganoza (Fortuna Silver ceo).
2021-01-16 Sat 17:20-21:22 breaks: 19:00-19:35
Sync with Olaf – see written diary for notes.
Followup this on variadic functions in C++ that may help in the alternative handwritten mock s:

https://en.cppreference.com/w/cpp/language/parameter_pack

2021-01-17 Sun 07:50-12:35 & 17:20-19:00 breaks: = 4:45 + 1:40 = 6:25
Idea: iterate over the args, possibly via a simple array to avoid stl. Last entry is the return type?
Some progress. Also quick extra sync w Olaf – see jabber chat

Next on cpp mock: 
-   Check expectations!
-   Use the CHECK… macros too.

Week 03 (2021)
2021-01-18 Mon 08:59-19:00 breaks: 50m & 20m & 50 = 10:00 – 2:00 = 8:00
Eve: 19:30-22:50 Progress on Signature class and saw Stroustrup’s recursive variadic template tuple 
[x] Dailies 9:00-10:00
- Our misra stance adopted ypso-wide (informed 8.55!)
- Aggressive schedule this week: 
- Agree on commitments and
- Move to new folder layout in Azure repos
(About time..)

[] Purple review commitments? Meeting
-   Should move to use real code, from lower layers
-   List the modules we rely on
o   SysUpTime
o   SwTimer
o   Logger
o   ErrorHandler
o   CodePoint.h
o   SysMutex
o   SysDispatcherEvent
o   TimeAccelerationFactor
o   SysTypes
-   New ones later:
o   DSM
o   CentralScheduler

-   FatalError handler lacks the ‘cause’ field, will need updating throughout code


[] Check the orange tests on devzone for tests, how do they disambiguate return types in mock calls?
[x] finished reviewing the Branching strategy wiki page

Summary of progress yesterday:
-   Can hand write mocks to register actual calls
-   Uses variadic templated interface, but return value cannot go last currently
-   Now trying to record the call information for use in checkExpectations()


2021-01-19 Tue 07:56-17:53 breaks: 1:00 & 20m & 10m = 10:00 – 1:30 = 8:30
Eve: 20:30-22:41 Some weird progress with initialiser lists..
[x] Purple grooming meet (tidying up the azure board, features, tasks etc)
[x] 9-10 Dailys 
-   Got input from Daniel how to browse requriemetns
-   
[x] 13 Abgleich meeting w Peter Rusch and Olaf.  Wanted my impressions of Purple team.
[x] 4.30p-5.30p purple estimation meeting further input from Olaf. Managed to identify overlap and clarify points of uncertainty.

2021-01-20 Wed 07:47-18:35 breaks: 11:57-13:00 & 10m & 10m = 10:50 – 1:25 = 9:25
Eve: 20:16-23:02 Progress folder structure migration started in evening with Thiago 
[x] Update numbers for Jonas, in Purple effort estimation 
[] 9-10 Dailys 
[] 10-12 TTT 
-   Branching wiki reviewed
-   Folder structure clarified – see 

[] 14- Purple estimation wrapup (+ folder structures??)

2021-01-21 Thu 07:53-22:35 breaks:12:39-13:05 & 15m & 20m & 2:00 = 14:40 – 3:00 = 11:00
[]8a continue with Thiago refactor Therapy folders
[]9-10 dailys (today’s group daily moved here)
[]11a 

22:15 figured out that the build.py broke on 6january 13:17 commit from Thiago 
2021-01-22 Fri 07:30-18:30 breaks: 15m & 12:20-13:20 & 20 & 10m
Usual dailys and so forth. 
Finish refactoring folder layouts with Thiago and intermittent input from Marc and Jonas.
Prepared a ‘purple’ branch ready pull into collaboration branch.
Later in evening Thiago showed us some fix in Accu and related unit tests. He sent out a pull request. 
Later briefly showed Marc S. how to find the collaboration branch and how to prepare a pull request.
And some book keeping for timesheet.
And half an hour talking with Peter/Olaf about project team structure…

2021-01-24 Sun 17:40-19:00 breaks: 
Long chat with Olaf about Purple progress and plans for the week. I suggested:
